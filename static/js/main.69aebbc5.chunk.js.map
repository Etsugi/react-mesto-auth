{"version":3,"sources":["components/ProtectedRoute.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProflePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmPopup.js","components/FormValidator/SignForm.js","components/Login.js","components/Register.js","images/tooltip-ok.svg","images/tooltip-fail.svg","components/InfoTooltip.js","utils/Api.js","utils/Auth.js","components/App.js","index.js"],"names":["ProtectedRoute","Component","component","props","path","loggedIn","to","redirect","Header","React","useState","inMenuHeader","setMenuHeader","className","type","onClick","userEmail","e","preventDefault","onSignOut","CurrentUserContext","createContext","Card","user","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onCardClick","alt","name","src","link","onCardLike","likeCounter","onConfirm","Main","profile","avatar","onEditAvatar","onEditProfile","id","about","onAddPlace","cards","map","length","now","Date","getFullYear","Footer","ImagePopup","onClose","PopupWithForm","isOpen","onSubmit","noValidate","title","children","buttonText","EditProfilePopup","setName","description","setDescription","setButtonText","useEffect","onUpdateUser","onChange","target","value","placeholder","minLength","maxLength","required","EditAvatarPopup","avatarRef","useRef","current","onUpdateAvatar","ref","defaultValue","AddPlacePopup","setTitle","setLink","ConfirmPopup","SignFormSchema","Yup","shape","email","password","min","max","Login","initialValues","validationSchema","values","onAuthorization","handleSubmit","render","errors","autoComplete","Register","onRegistration","InfoTooltip","tooltipState","state","tooltipOk","tooltipFail","text","api","config","this","_url","baseUrl","_headers","headers","fetch","method","then","res","_getResponseData","data","body","JSON","stringify","cardId","disLikeCard","likeCard","ok","json","Promise","reject","status","authorization","BASE_URL","register","authorize","checkToken","token","App","history","useHistory","setLoggedIn","checkAuthorize","setTooltipState","setUserEmail","currentUser","setCurrentUser","getUserInfo","setProfile","catch","err","alert","setCards","getCards","isInfoTooltipPopupOpen","setInfoTooltipPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isConfirmPopupOpen","setConfirmPopupOpen","selectedCard","setSelectedCard","confirmElement","setConfirmElement","localStorage","getItem","jwt","auth","console","log","push","clickInfoTooltipPopupOpen","closeAllPopups","Provider","removeItem","setItem","changeLikeCardStatus","newCard","newCards","c","userData","updateUserInfo","updateUserAvatar","addCard","deleteCard","filter","item","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.69aebbc5.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route path={props.path}>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to={props.redirect} />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport { Link, Route, Switch } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n  const [inMenuHeader, setMenuHeader] = React.useState(false);\r\n\r\n  function handleMenu() {\r\n    setMenuHeader(!inMenuHeader)\r\n  }\r\n  function handleSignOut(e) {\r\n    e.preventDefault();\r\n    setMenuHeader(false);\r\n    props.onSignOut();\r\n  }\r\n  return (\r\n    <header className={inMenuHeader ? 'header header_reverse' : 'header'}>\r\n      <div className=\"header__logo\">\r\n        {props.loggedIn === true && \r\n          (\r\n          <button className={inMenuHeader ? 'header__button-menu header__button-menu_opened' :\r\n            'header__button-menu'} type=\"checkbox\" onClick={handleMenu}></button>\r\n          )\r\n        }\r\n      </div>\r\n      <div className={props.loggedIn ? (inMenuHeader ? 'header__container-opened' :\r\n        'header__container header__container-mobile') : 'header__container'}>\r\n        <Switch>\r\n          <Route path=\"/sign-in\">\r\n            <Link className=\"header__navlink\" to=\"/sign-up\">\r\n              Регистрация\r\n            </Link>\r\n          </Route>\r\n          <Route path=\"/sign-up\">\r\n            <Link className=\"header__navlink\" to=\"/sign-in\">\r\n              Войти\r\n            </Link>\r\n          </Route>\r\n          <Route path=\"/\">\r\n            <p className={inMenuHeader ? 'header__user header__user_menu-opened' : \r\n              'header__user'}>{props.userEmail}</p>\r\n            <button className={inMenuHeader ? 'header__navlink header__navlink_menu-opened header__navlink_signout' : \r\n              'header__navlink header__navlink_signout'} type=\"submit\" onClick={handleSignOut}>\r\n              Выйти\r\n            </button>       \r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card(props) {\r\n  const user = React.useContext(CurrentUserContext);\r\n  const isOwn = props.card.owner._id === user._id;\r\n  const cardDeleteButtonClassName = (`element__trash-button ${isOwn ? '' : 'element__trash-button-disabled'}`);\r\n  const isLiked = props.card.likes.some(i => i._id === user._id);\r\n  const cardLikeButtonClassName = (`element__like-button ${isLiked ? 'element__like-button_active' : ''}`);  \r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  } \r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card);\r\n  }\r\n  function handleDeleteClick() {\r\n    props.onConfirm(props.card);\r\n  }\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <img onClick={handleClick} className=\"element__image\" alt={props.card.name} src={props.card.link} />\r\n      <div className=\"element__group\">\r\n        <p className=\"element__text\">{props.card.name}</p>\r\n        <button onClick={handleLikeClick} type=\"button\" className={cardLikeButtonClassName}>\r\n          <p className=\"element__like-counter\">{props.likeCounter}</p>\r\n        </button>\r\n      </div>\r\n      <button onClick={handleDeleteClick} type=\"button\" className={cardDeleteButtonClassName}></button>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from \"./Card.js\";\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Main(props) {\r\n  const user = React.useContext(CurrentUserContext);\r\n  return (\r\n    <main className={props.profile}>\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar\">\r\n          <img className=\"profile__avatar-image\" alt=\"Фото профиля\" src={`${user.avatar}`} />\r\n          <button type=\"button\" onClick={props.onEditAvatar} className=\"profile__avatar-update-button\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__info-group\">\r\n            <h1 className=\"profile__name\">{user.name}</h1>\r\n            <button type=\"button\" onClick={props.onEditProfile} className=\"profile__edit-button\" id=\"edit-profile\" />\r\n          </div>\r\n          <p className=\"profile__description\">{user.about}</p>\r\n        </div>\r\n        <button type=\"button\" onClick={props.onAddPlace} className=\"profile__add-button\" id=\"add-card\" />\r\n      </section>\r\n      <section className=\"elements\" id=\"elements\">\r\n        {props.cards.map(card => \r\n          <Card\r\n            key={card._id}\r\n            card={card}\r\n            onCardClick={props.onCardClick}\r\n            likeCounter={card.likes.length}\r\n            onCardLike={props.onCardLike}\r\n            onConfirm={props.onConfirm}\r\n          />        \r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","const now = new Date().getFullYear();\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; {now} Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","function ImagePopup(props) {\r\n  return (\r\n    <div className={`popup ${props.card && 'popup_opened'}`} id={props.name}>\r\n        <div className=\"popup__image-container\">\r\n          <img className=\"popup__image\" alt={props.card.name} src={`${props.card.link}`} />\r\n          <p className=\"popup__image-description\">{props.card.name}</p>\r\n          <button type=\"button\" onClick={props.onClose} className=\"popup__close-button\"></button>\r\n        </div>\r\n        <div onClick={props.onClose} className=\"popup__overlay popup__overlay_for-image\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;","function PopupWithForm(props) {\r\n\r\n  return (\r\n    <div className={`popup ${props.isOpen && 'popup_opened'}`} id={props.name}>\r\n      <form onSubmit={props.onSubmit} className=\"popup__form\" name={props.name} noValidate>\r\n        <h2 className=\"popup__form-heading\">{props.title}</h2>\r\n        {props.children}\r\n        <button type=\"submit\" className=\"popup__save-button\">{props.buttonText}</button>\r\n        <button type=\"button\" onClick={props.onClose} className=\"popup__close-button\" />\r\n      </form>\r\n      <div onClick={props.onClose} className=\"popup__overlay\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const user = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const [buttonText, setButtonText] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(user.name);\r\n    setDescription(user.about);\r\n  }, [user]); \r\n\r\n  React.useEffect(() => {\r\n    setName(user.name);\r\n    setDescription(user.about);\r\n    setButtonText('Сохранить');\r\n  }, [props.isOpen]); \r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setButtonText('Загрузка...');\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n        name=\"edit-profile\"\r\n        title=\"Редактировать профиль\"\r\n        buttonText={buttonText}\r\n        isOpen={props.isOpen}\r\n        onClose={props.onClose}\r\n        onSubmit={handleSubmit}\r\n      >\r\n          <input onChange={handleNameChange} value={name || ``} type=\"text\" name=\"name\" placeholder=\"Имя\" minLength=\"2\" maxLength=\"40\"\r\n            className=\"popup__input popup__input_name\" required />\r\n          <span className='popup__input_error' id='name-input-error'></span>\r\n          <input onChange={handleDescriptionChange} value={description || ``} type=\"text\" name=\"about\" placeholder=\"Описание\" minLength=\"2\" maxLength=\"200\"\r\n            className=\"popup__input popup__input_description\" required />\r\n          <span className='popup__input_error' id='about-input-error'></span>\r\n      </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = React.useRef();\r\n  const [buttonText, setButtonText] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    avatarRef.current.value = '';\r\n    setButtonText('Сохранить');\r\n  }, [props.isOpen]); \r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setButtonText('Загрузка...');\r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"edit-avatar-profile\"\r\n      title=\"Обновить аватар\"\r\n      buttonText={buttonText}\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <input ref={avatarRef} defaultValue='' type=\"url\" name=\"avatar\" placeholder=\"Ссылка на картинку\"\r\n        className=\"popup__input popup__input_source\" required />\r\n      <span className='popup__input_error' id='avatar-input-error'></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const [title, setTitle] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n  const [buttonText, setButtonText] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setTitle('');\r\n    setLink('');\r\n    setButtonText('Создать');\r\n  }, [props.isOpen]); \r\n\r\n  function handleSetTitle(e) {\r\n    setTitle(e.target.value);\r\n  }\r\n  function handleSetLink(e) {\r\n    setLink(e.target.value);\r\n  }\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setButtonText('Загрузка...');\r\n    props.onAddPlace({\r\n      name: title,\r\n      link\r\n    });\r\n  }\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n        name=\"add-card\"\r\n        title=\"Новое место\"\r\n        buttonText={buttonText}\r\n        isOpen={props.isOpen}\r\n        onClose={props.onClose}\r\n        onSubmit={handleSubmit}\r\n      >\r\n          <input onChange={handleSetTitle} value={title} type=\"text\" name=\"title\" placeholder=\"Название\" minLength=\"1\" maxLength=\"30\"\r\n            className=\"popup__input popup__input_title\" required />\r\n          <span className='popup__input_error' id='title-input-error'></span>\r\n          <input onChange={handleSetLink} value={link} type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\"\r\n            className=\"popup__input popup__input_source\" required />\r\n          <span className='popup__input_error' id='source-input-error'></span>\r\n      </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction ConfirmPopup(props) {\r\n  const [buttonText, setButtonText] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setButtonText('Да');\r\n  }, [props.isOpen]); \r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setButtonText('Загрузка...');\r\n    props.onConfirm();\r\n  }\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n        name=\"confirm\"\r\n        title=\"Вы уверены?\"\r\n        buttonText={buttonText}\r\n        isOpen={props.isOpen}\r\n        onClose={props.onClose}\r\n        onSubmit={handleSubmit}\r\n      >\r\n      </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default ConfirmPopup;","import * as Yup from \"yup\";\r\n\r\nconst SignFormSchema = Yup.object().shape({\r\n  email: Yup.string()\r\n    .email(\"Некорректный email адрес\")\r\n    .required(\"Email обязателен\"),\r\n  password: Yup.string()\r\n    .min(6, \"Длина пароля не менее 6 символов\")\r\n    .max(20, \"Длина пароля не более 20 символов\")\r\n    .required(\"Пароль обязателен\")\r\n});\r\n\r\nexport default SignFormSchema;\r\n","import React from 'react';\r\nimport { Formik, Field, Form } from \"formik\";\r\nimport SignFormSchema from \"./FormValidator/SignForm.js\";\r\n\r\nfunction Login(props) {\r\n\r\n  function handleSubmit(values) {\r\n    props.onAuthorization({\r\n      email: values.email,\r\n      password: values.password\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        email: \"\",\r\n        password: \"\"\r\n      }}\r\n      validationSchema={SignFormSchema}\r\n      onSubmit={values => {\r\n        handleSubmit(values);\r\n      }}\r\n      render={({ errors }) => (\r\n        <Form className=\"sign__form\" noValidate>\r\n          <h2 className=\"sign__title\">Вход</h2>\r\n          <Field type=\"email\" name=\"email\" placeholder=\"Email\" className=\"sign__input\" />\r\n            {errors.email && <span className='sign__input_error'>{errors.email}</span>}\r\n          <Field type=\"password\" autoComplete=\"on\" name=\"password\" placeholder=\"Пароль\" className=\"sign__input\" />\r\n            {errors.password && <span className='sign__input_error'>{errors.password}</span>}\r\n          <button className={(errors.password || errors.email) ? 'sign__button sign__button_disabled' : \r\n            'sign__button'} type=\"submit\">Войти</button>\r\n        </Form>\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Field, Form } from \"formik\";\r\nimport SignFormSchema from \"./FormValidator/SignForm.js\";\r\n\r\nfunction Register(props) {\r\n\r\n  function handleSubmit(values) {\r\n    props.onRegistration({\r\n      email: values.email,\r\n      password: values.password\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        email: \"\",\r\n        password: \"\"\r\n      }}\r\n      validationSchema={SignFormSchema}\r\n      onSubmit={values => {\r\n        handleSubmit(values);\r\n      }}\r\n      render={({ errors }) => (\r\n        <Form className=\"sign__form\" noValidate>\r\n          <h2 className=\"sign__title\">Регистрация</h2>\r\n          <Field type=\"email\" name=\"email\" placeholder=\"Email\" className=\"sign__input\" />\r\n            {errors.email && <span className='sign__input_error'>{errors.email}</span>}\r\n          <Field type=\"password\" autoComplete=\"on\" name=\"password\" placeholder=\"Пароль\" className=\"sign__input\" />\r\n            {errors.password && <span className='sign__input_error'>{errors.password}</span>}\r\n          <button className={(errors.password || errors.email) ? 'sign__button sign__button_disabled' : \r\n            'sign__button'} type=\"submit\">Зарегистрироваться</button>\r\n          <Link to=\"/sign-in\" className=\"sign__button_dark\" type=\"button\">Уже зарегистрированы? Войти</Link>\r\n        </Form>\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Register;","export default __webpack_public_path__ + \"static/media/tooltip-ok.e004e6e7.svg\";","export default __webpack_public_path__ + \"static/media/tooltip-fail.471086c8.svg\";","import React from 'react';\r\n\r\nimport tooltipOk from '../images/tooltip-ok.svg'\r\nimport tooltipFail from '../images/tooltip-fail.svg'\r\n\r\nfunction InfoTooltip(props) {\r\n  return (\r\n    <div className={`popup ${props.isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup-tooltip__container\">\r\n        <img className=\"popup__icon\"\r\n          src={props.tooltipState.state ? tooltipOk : tooltipFail}\r\n          alt={props.tooltipState.alt}\r\n        />\r\n        <h2 className=\"popup__message\">\r\n          {props.tooltipState.text}\r\n        </h2>\r\n        <button type=\"button\" onClick={props.onClose} className=\"popup-tooltip__close-button\" />\r\n      </div>\r\n      <div onClick={props.onClose} className=\"popup__overlay\"></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;","class Api {\n  constructor (config) {\n    this._url = config.baseUrl;\n    this._headers = config.headers;\n  }\n\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: this._headers\n    }).then((res) => {\n      return this._getResponseData(res);\n    })\n  }\n\n  updateUserInfo(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    }).then((res) => {\n      return this._getResponseData(res);\n    })\n  }\n\n  updateUserAvatar(data) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    }).then((res) => {\n      return this._getResponseData(res);\n    })\n  }\n\n  getCards() {\n    return fetch(`${this._url}/cards`, {\n      method: 'GET',\n      headers: this._headers\n    }).then((res) => {\n      return this._getResponseData(res);\n    })\n  }\n\n  addCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    }).then((res) => {\n      return this._getResponseData(res);\n    })\n  }\n\n  deleteCard(data) {\n    return fetch(`${this._url}/cards/${data._id}`, {\n      method: 'DELETE',\n      headers: this._headers,\n      body: JSON.stringify({\n      })\n    }).then((res) => {\n      return this._getResponseData(res);\n    })\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if(isLiked) {\n      return this.disLikeCard(cardId);\n    }\n    else {\n      return this.likeCard(cardId);\n    }\n  }\n\n  likeCard(cardId) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers,\n    }).then((res) => {\n      return this._getResponseData(res);\n    })\n  }\n\n  disLikeCard(cardId) {\n    return fetch(`${this._url}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    }).then((res) => {\n      return this._getResponseData(res);\n    })\n  }\n\n  _getResponseData(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    else return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  /*getAllData() {\n    return Promise.all([this.getUserInfo(), this.getCards()]);\n  }*/\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\n  headers: {\n    authorization: 'a3935a49-8230-429f-9fab-7d2d6f416793',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;","const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nfunction register(data) {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      email: data.email, \r\n      password: data.password\r\n    })\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return res.status;\r\n  })\r\n}; \r\n\r\nfunction authorize(data) {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      email: data.email, \r\n      password: data.password\r\n    })\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return res.status;\r\n  })\r\n}; \r\n\r\nfunction checkToken(token) {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      \"Authorization\" : `Bearer ${token}`\r\n    }\r\n  })\r\n  .then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return res.status;\r\n  })\r\n}\r\n\r\nexport default {\r\n  register,\r\n  authorize,\r\n  checkToken\r\n}","import React from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport ProtectedRoute from './ProtectedRoute';\n\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport EditProfilePopup from './EditProflePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ConfirmPopup from './ConfirmPopup.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoTooltip from './InfoTooltip.js';\n\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nimport api from '../utils/Api.js';\nimport auth from '../utils/Auth.js';\n\nfunction App() {\n  const history = useHistory();\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  React.useEffect(() => {\n    checkAuthorize();\n  }, []);\n\n  const [tooltipState, setTooltipState] = React.useState([]);\n  const [userEmail, setUserEmail] = React.useState('');\n\n  const [currentUser, setCurrentUser] = React.useState('');\n  React.useEffect(() => {\n    const initialCurrentUser = api.getUserInfo();\n    initialCurrentUser.then((data => {\n      const userData = data;\n      setCurrentUser(userData);\n      })\n    )\n    .then(() => {\n      setProfile('content');\n    })\n    .catch((err) => {\n      alert(err);\n    });\n  }, [])\n\n  const [cards, setCards] = React.useState([]);\n  React.useEffect(() => {\n    const initialCard = api.getCards();\n    initialCard.then((data => {\n      const card = data;\n      setCards(card);\n      })\n    )\n    .catch((err) => {\n      alert(err);\n    });\n  }, [])\n\n  const [profile, setProfile] = React.useState('content content-disabled');\n  const [isInfoTooltipPopupOpen, setInfoTooltipPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isConfirmPopupOpen, setConfirmPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState('');\n  const [confirmElement, setConfirmElement] = React.useState('');\n\n  function checkAuthorize() {\n    if (localStorage.getItem('jwt')){\n      const jwt = localStorage.getItem('jwt');\n      auth.checkToken(jwt)\n      .then((data) => {\n        if(data === 401) {\n          console.log(\"Токен не передан или передан не в том формате!\");\n        }\n        else {\n          setLoggedIn(true);\n          setUserEmail(data.data.email);\n          history.push(\"/\");\n        }\n      })\n    }\n  }\n  function clickRegistration(data) {\n    setTooltipState({\n      state: false,\n      text: \"Что-то пошло не так! Попробуйте ещё раз.\",\n      alt: \"Иконка неудачной регистрации\"\n    })\n    auth.register(data)\n    .then((data) => {\n      if(data === 400) {\n        setInfoTooltipPopupOpen(true);\n        console.log('Некорректно заполнено одно из полей из полей!');\n      }\n      else {\n        setTooltipState({\n          state: true,\n          text: \"Вы успешно зарегистрировались!\",\n          alt: \"Иконка успешной регистрации\"\n        })\n        clickInfoTooltipPopupOpen();\n        history.push(\"/sign-in\");\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n  function clickAutorization(data) {\n    auth.authorize(data)\n    .then((data) => {\n      if(data === 400) {\n        clickInfoTooltipPopupOpen();\n        console.log('Не передано одно из полей!');\n      }\n      else if(data === 401) {\n        clickInfoTooltipPopupOpen();\n        console.log('Пользователь с таким email не найден!');\n      }\n      else {\n        localStorage.setItem('jwt', data.token);\n        checkAuthorize();\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n  function clickSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('jwt');\n    history.push('/sign-in');\n  }\n  function clickInfoTooltipPopupOpen() {\n    setInfoTooltipPopupOpen(true);\n  }\n  function clickEditProfilePopupOpen() {\n    setEditProfilePopupOpen(true);    \n  }\n  function clickEditAvatarPopupOpen() {\n    setEditAvatarPopupOpen(true);\n  }\n  function clickAddPlacePopupOpen() {\n    setAddPlacePopupOpen(true);\n  }\n  function clickImagePopupOpen(card) {\n    setSelectedCard(card);\n  }\n  function clickConfirmPopupOpen(card) {\n    setConfirmElement(card);\n    setConfirmPopupOpen(true);\n  }\n  function closeAllPopups() {\n    setInfoTooltipPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setConfirmPopupOpen(false);\n    setSelectedCard('');\n    setConfirmElement('');\n  }\n\n  function handleUpdateUser(userData) {\n    api.updateUserInfo(userData).then((userData) => {\n      setCurrentUser(userData);\n    })\n    .then(() => {\n      closeAllPopups();\n\n    })\n    .catch((err) => {\n      alert(err);\n    });\n  }\n\n  function handleUpdateAvatar(userData) {\n    api.updateUserAvatar(userData).then((userData) => {\n      setCurrentUser(userData);\n    })\n    .then(() => {\n      closeAllPopups();\n    })\n    .catch((err) => {\n      alert(err);\n    });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, isLiked).then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    })\n    .catch((err) => {\n      alert(err);\n    });\n  } \n\n  function handleConfirm() {\n    handleCardDelete(confirmElement);\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card).then(() => {\n      const newCards = cards.filter((item) => !(item._id === card._id));\n      setCards(newCards);\n    })\n    .then(() => {\n      closeAllPopups();\n    })\n    .catch((err) => {\n      alert(err);\n    });\n  } \n\n  function handleAddPlace(card) {\n    api.addCard(card).then((card) => {\n      setCards([card, ...cards]);\n    })\n    .then(() => {\n      closeAllPopups();\n    })\n    .catch((err) => {\n      alert(err);\n    });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser} >\n      <Header \n        loggedIn={loggedIn}\n        userEmail={userEmail}\n        onSignOut={clickSignOut}\n      />\n      <Switch>\n        <Route path=\"/sign-up\">\n          <Register \n            onRegistration={clickRegistration}\n          />\n        </Route>\n        <Route path=\"/sign-in\">\n          <Login \n            onAuthorization={clickAutorization}\n          />\n        </Route>\n        <ProtectedRoute\n          path=\"/\"\n          redirect=\"/sign-in\"\n          loggedIn={loggedIn}\n          component={Main}\n          profile={profile}\n          onEditProfile={clickEditProfilePopupOpen}\n          onEditAvatar={clickEditAvatarPopupOpen}\n          onAddPlace={clickAddPlacePopupOpen}\n          onConfirm={clickConfirmPopupOpen}\n          cards={cards}\n          onCardClick={clickImagePopupOpen}\n          onCardLike={handleCardLike}\n        />\n      </Switch>\n      <Footer />\n      \n      <InfoTooltip\n        tooltipState={tooltipState}\n        isOpen={isInfoTooltipPopupOpen} \n        onClose={closeAllPopups}\n      />\n      <EditProfilePopup \n        isOpen={isEditProfilePopupOpen} \n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n      <EditAvatarPopup \n        isOpen={isEditAvatarPopupOpen} \n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n      <AddPlacePopup \n        isOpen={isAddPlacePopupOpen} \n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlace}\n      />\n      <ConfirmPopup\n        isOpen={isConfirmPopupOpen} \n        onClose={closeAllPopups}\n        onConfirm={handleConfirm}\n      />\n      <ImagePopup\n        card={selectedCard}\n        onClose={closeAllPopups}\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}